(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Products"],{"0538":function(t,e,n){"use strict";var r=n("1c0b"),o=n("861d"),a=[].slice,i={},c=function(t,e,n){if(!(e in i)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";i[e]=Function("C,a","return new C("+r.join(",")+")")}return i[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=a.call(arguments,1),i=function(){var r=n.concat(a.call(arguments));return this instanceof i?c(e,r.length,r):e.apply(t,r)};return o(e.prototype)&&(i.prototype=e.prototype),i}},"211b":function(t,e,n){"use strict";var r=n("d4ec"),o=function t(e){Object(r["a"])(this,t),this.data=e};e["a"]=o},"262e":function(t,e,n){"use strict";function r(t,e){return r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}n.d(e,"a",(function(){return o}))},"2caf":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));n("4ae1"),n("3410");function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}n("d3b7"),n("25f0");function o(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}n("a4d3"),n("e01a"),n("d28b"),n("3ca3"),n("ddb0");function a(t){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){return!e||"object"!==a(e)&&"function"!==typeof e?i(t):e}function u(t){var e=o();return function(){var n,o=r(t);if(e){var a=r(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return c(this,n)}}},3410:function(t,e,n){var r=n("23e7"),o=n("d039"),a=n("7b0b"),i=n("e163"),c=n("e177"),u=o((function(){i(1)}));r({target:"Object",stat:!0,forced:u,sham:!c},{getPrototypeOf:function(t){return i(a(t))}})},"4ae1":function(t,e,n){var r=n("23e7"),o=n("d066"),a=n("1c0b"),i=n("825a"),c=n("861d"),u=n("7c73"),s=n("0538"),l=n("d039"),f=o("Reflect","construct"),d=l((function(){function t(){}return!(f((function(){}),[],t)instanceof t)})),p=!l((function(){f((function(){}))})),b=d||p;r({target:"Reflect",stat:!0,forced:b,sham:b},{construct:function(t,e){a(t),i(e);var n=arguments.length<3?t:a(arguments[2]);if(p&&!d)return f(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(s.apply(t,r))}var o=n.prototype,l=u(c(o)?o:Object.prototype),b=Function.apply.call(t,l,e);return c(b)?b:l}})},"4bcf":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("TableTitle",t._b({on:{openDialog:t.openDialog,deleteHandler:t.deleteHandler}},"TableTitle",t.tableTitlePost,!1)),n("Table-view",t._b({ref:"TableView",on:{btnHandle:t.openDialog,"row-selection":t.setSelection,handleCurrentChange:t.handleCurrentChange,handleSizeChange:t.handleSizeChange}},"Table-view",t.tableViewPost,!1)),n("Dialog",t._b({attrs:{visible:t.$store.state.Dialog.dialogVisible},on:{"update:visible":function(e){return t.$set(t.$store.state.Dialog,"dialogVisible",e)},submit:t.submitForm,upload:t.upload}},"Dialog",t.dialogPost,!1))],1)},o=[],a=(n("4160"),n("159b"),n("96cf"),n("1da1")),i=(n("99af"),n("dca8"),n("7c15")),c=n("1b03"),u=(n("a15b"),n("d81d"),n("5530")),s=n("d4ec"),l=n("bee2"),f=n("262e"),d=n("2caf"),p=n("211b"),b=function(t){Object(f["a"])(n,t);var e=Object(d["a"])(n);function n(){return Object(s["a"])(this,n),e.apply(this,arguments)}return Object(l["a"])(n,[{key:"transform",value:function(){return this.data.map((function(t){return Object(u["a"])(Object(u["a"])({},t),{},{imageUrl:t.imageUrl.join()})}))}}]),n}(p["a"]),m=b,h=function(t){Object(f["a"])(n,t);var e=Object(d["a"])(n);function n(){return Object(s["a"])(this,n),e.apply(this,arguments)}return Object(l["a"])(n,[{key:"transform",value:function(){return Object(u["a"])(Object(u["a"])({},this.data),{},{imageUrl:this.data.imageUrl.join()})}}]),n}(p["a"]),g=h,O=function(t){Object(f["a"])(n,t);var e=Object(d["a"])(n);function n(){return Object(s["a"])(this,n),e.apply(this,arguments)}return Object(l["a"])(n,[{key:"transform",value:function(){return Object(u["a"])(Object(u["a"])({},this.data),{},{imageUrl:[this.data.imageUrl]})}}]),n}(p["a"]),y=O,j={namespaced:!0,state:function(){return{columns:Object.freeze([{name:"全選",type:"selection"},{name:"縮圖",desc:"imageUrl",img:!0},{name:"產品名稱",desc:"title"},{name:"價錢",desc:"price"},{name:"是否啟用",desc:"enabled",formatter:function(t){return t?'<p class="text-success">啟用</p>':'<p class="text-danger">未啟用</p>'}},{name:"操作",width:"150",btns:[{name:"修改",btnType:"warning",method:"edit"},{name:"刪除",btnType:"danger",method:"delete"}]}]),formData:{title:"",category:"",origin_price:0,price:0,imageUrl:"",content:"",description:"",enabled:!1,options:"起司蛋糕"},ruleForm:Object.freeze([{name:"商品名稱",clearable:!0,type:"Input",prop:"title",rules:"required",required:!0},{name:"分類",clearable:!0,type:"Input",prop:"category",rules:"required",required:!0},{name:"原價",clearable:!0,type:"NumberInput",prop:"origin_price",rules:"required|integer",required:!0},{name:"特價",clearable:!0,type:"NumberInput",prop:"price",rules:"required|integer",required:!0},{name:"上傳圖片",type:"Upload",prop:"imageUrl",rules:"mimes:image/*",required:!0},{name:"縮圖",type:"Pic",img:!0,prop:"imageUrl"},{name:"單位",clearable:!0,type:"Input",prop:"unit"},{name:"贈品",type:"Select",prop:"options",options:[{value:"起司蛋糕",label:"起司蛋糕"},{value:"巧克力布朗尼",label:"巧克力布朗尼"},{value:"黑森林蛋糕",label:"黑森林蛋糕"},{value:"瑞士巧克力慕斯",label:"瑞士巧克力慕斯"},{value:"馬卡龍",label:"馬卡龍"}]},{name:"商品敘述",clearable:!0,type:"TextArea",prop:"content",rules:"required",required:!0},{name:"商品說明",clearable:!0,type:"TextArea",prop:"description",rules:"required",required:!0},{name:"是否上架",clearable:!0,type:"SwitchBox",prop:"enabled",rules:"required"}]),tableData:[]}},actions:{uploadPic:function(t,e){return Object(a["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,r("Loading/LOADING",!0,{root:!0}),n.next=4,Object(i["s"])(e).then((function(t){r("SET_PIC",t.data.path)}));case 4:r("Loading/LOADING",!1,{root:!0});case 5:case"end":return n.stop()}}),n)})))()},getProduct:function(t){return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=t.rootState,n("Loading/LOADING",!0,{root:!0}),e.next=4,Object(i["k"])("page=".concat(r.Pagination.current,"&paged=").concat(r.Pagination.paged)).then((function(t){n("Pagination/SET_TOTAL",t.meta.pagination.total,{root:!0}),n("Pagination/SET_TOTAL_PAGES",t.meta.pagination.total_pages,{root:!0});var e=new m(t.data);n("GET_TABLE_DATA",e.transform()),n("Loading/LOADING",!1,{root:!0})}));case 4:case"end":return e.stop()}}),e)})))()},getSingleProduct:function(t,e){return Object(a["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,r("Loading/LOADING",!0,{root:!0}),n.next=4,Object(i["m"])(e).then((function(t){var e=new g(t.data);r("SET_FORM_DATA",e.transform()),r("Loading/LOADING",!1,{root:!0})}));case 4:case"end":return n.stop()}}),n)})))()},createProduct:function(t){return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,r,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=t.dispatch,o=t.state,n("Loading/LOADING",!0,{root:!0}),a=new y(o.formData),e.next=5,Object(i["c"])(a.transform()).then((function(){n("Loading/LOADING",!1,{root:!0}),Object(c["b"])("訊息","新增成功","success"),n("Dialog/CLEAR_DIALOG",!1,{root:!0}),r("getProduct")}));case 5:case"end":return e.stop()}}),e)})))()},editProduct:function(t){return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,r,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,r=t.dispatch,o=t.commit,o("Loading/LOADING",!0,{root:!0}),a=new y(n.formData),e.next=5,Object(i["h"])(n.formData.id,a.transform()).then((function(){o("Loading/LOADING",!1,{root:!0}),Object(c["b"])("訊息","修改成功","success"),o("Dialog/CLEAR_DIALOG",!1,{root:!0}),r("getProduct")}));case 5:case"end":return e.stop()}}),e)})))()},deleteProduct:function(t,e){return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,o=t.dispatch,r("Loading/LOADING",!0,{root:!0}),n.next=4,Object(i["f"])(e).then((function(){Object(c["b"])("訊息","删除成功","success"),r("Loading/LOADING",!1,{root:!0}),o("getProduct")}));case 4:case"end":return n.stop()}}),n)})))()},open:function(t,e){var n=t.commit,r=e.type;"add"===r.method&&(n("INIT_FORM_DATA"),n("Dialog/DIALOG_ADD","新增資料",{root:!0}))},updateOpen:function(t,e){return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.commit,o=t.dispatch,a=e.type,"edit"!==a.method){n.next=6;break}return n.next=5,o("getSingleProduct",a.row.id);case 5:r("Dialog/DIALOG_EDIT","修改文章",{root:!0});case 6:case"end":return n.stop()}}),n)})))()},deleteOpen:function(t,e){var n=t.dispatch,r=e.type;"delete"===r.method&&Object(c["a"])().then((function(){n("deleteProduct",r.row.id)})).catch((function(){Object(c["b"])("info","已取消删除","info")}))}},mutations:{GET_TABLE_DATA:function(t,e){t.tableData=Object.freeze(e)},INIT_FORM_DATA:function(t){t.formData={title:"",category:"",origin_price:0,price:0,imageUrl:"",content:"",description:"",enabled:!1,options:"起司蛋糕"}},SET_FORM_DATA:function(t,e){t.formData=e},SET_PIC:function(t,e){t.formData.imageUrl=e}}},v={name:"Products",data:function(){return{title:"產品列表",selection:[],textarea1:""}},computed:{tableViewPost:function(){return{title:this.title,data:this.$store.state.Product.tableData,columns:this.$store.state.Product.columns}},dialogPost:function(){return{"v-if":this.$store.state.Dialog.dialogVisible,title:this.$store.state.Dialog.dialogTitle,"rule-form":this.$store.state.Product.ruleForm,"form-data":this.$store.state.Product.formData,"is-edit":this.$store.state.Dialog.dialogIsEdit}},tableTitlePost:function(){return{title:this.title,selection:this.selection}}},created:function(){this.$registerModule(this.$store,{Product:j})},mounted:function(){this.$store.commit("Pagination/SET_CURRENT",1),this.$store.dispatch("Product/getProduct")},beforeDestroy:function(){this.$unregisterModule(this.$store,["Product"])},methods:{handleSizeChange:function(t){this.$store.commit("Pagination/SET_PAGED",t),this.$store.dispatch("Product/getProduct")},handleCurrentChange:function(t){this.$store.commit("Pagination/SET_CURRENT",t),this.$store.dispatch("Product/getProduct")},upload:function(t){this.$store.dispatch("Product/uploadPic",t)},setSelection:function(t){this.selection=t},deleteHandler:function(){var t=this;this.selection.forEach((function(e){t.$store.dispatch("Product/deleteProduct",e.id)}))},openDialog:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.$store.dispatch("Product/open",{type:t}),n.next=3,e.$store.dispatch("Product/updateOpen",{type:t});case 3:e.$store.dispatch("Product/deleteOpen",{type:t});case 4:case"end":return n.stop()}}),n)})))()},submitForm:function(t,e){t&&("add"===e?this.$store.dispatch("Product/createProduct"):this.$store.dispatch("Product/editProduct"))}}},w=v,D=n("2877"),P=Object(D["a"])(w,r,o,!1,null,null,null);e["default"]=P.exports},a15b:function(t,e,n){"use strict";var r=n("23e7"),o=n("44ad"),a=n("fc6a"),i=n("a640"),c=[].join,u=o!=Object,s=i("join",",");r({target:"Array",proto:!0,forced:u||!s},{join:function(t){return c.call(a(this),void 0===t?",":t)}})},bb2f:function(t,e,n){var r=n("d039");t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bee2:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return o}))},d4ec:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},dca8:function(t,e,n){var r=n("23e7"),o=n("bb2f"),a=n("d039"),i=n("861d"),c=n("f183").onFreeze,u=Object.freeze,s=a((function(){u(1)}));r({target:"Object",stat:!0,forced:s,sham:!o},{freeze:function(t){return u&&i(t)?u(c(t)):t}})},f183:function(t,e,n){var r=n("d012"),o=n("861d"),a=n("5135"),i=n("9bf2").f,c=n("90e3"),u=n("bb2f"),s=c("meta"),l=0,f=Object.isExtensible||function(){return!0},d=function(t){i(t,s,{value:{objectID:"O"+ ++l,weakData:{}}})},p=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,s)){if(!f(t))return"F";if(!e)return"E";d(t)}return t[s].objectID},b=function(t,e){if(!a(t,s)){if(!f(t))return!0;if(!e)return!1;d(t)}return t[s].weakData},m=function(t){return u&&h.REQUIRED&&f(t)&&!a(t,s)&&d(t),t},h=t.exports={REQUIRED:!1,fastKey:p,getWeakData:b,onFreeze:m};r[s]=!0}}]);