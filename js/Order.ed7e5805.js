(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Order"],{"2aea":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("TableTitle",t._b({},"TableTitle",t.tableTitlePost,!1)),n("Table-view",t._b({on:{switchHandle:t.switchHandle}},"Table-view",t.tableViewPost,!1))],1)},a=[],i=(n("99af"),n("dca8"),n("96cf"),n("1da1")),o=n("7c15"),c=n("1b03"),s=(n("a15b"),n("d81d"),n("5530")),u=n("d4ec"),d=n("bee2"),l=n("262e"),f=n("2caf"),m=n("211b"),h=function(t){Object(l["a"])(n,t);var e=Object(f["a"])(n);function n(){return Object(u["a"])(this,n),e.apply(this,arguments)}return Object(d["a"])(n,[{key:"transform",value:function(){return this.data.map((function(t){var e=t.products.map((function(t){return{title:t.product.title,quantity:t.quantity}})),n=e.map((function(t){return{"產品":t.title,"數量":t.quantity}})),r=n.map((function(t){return"".concat(t.產品," / ").concat(t.數量)}));return Object(s["a"])(Object(s["a"])({},t),{},{time:t.created.datetime,product:r.join("<br/>")})}))}}]),n}(m["a"]),O=h,b=n("c1df"),p={namespaced:!0,state:function(){return{columns:Object.freeze([{name:"訂單日期",desc:"time",formatter:function(t){return b(t).format("YYYY-MM-DD")},sortable:!0},{name:"產品",desc:"product"},{name:"訂單金額",desc:"amount"},{name:"是否付款",desc:"paid",switch:!0}]),tableData:[]}},actions:{getOrder:function(t){return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=t.rootState,n("Loading/LOADING",!0,{root:!0}),e.next=4,Object(o["j"])("page=".concat(r.Pagination.current,"&paged=").concat(r.Pagination.paged)).then((function(t){n("Pagination/SET_TOTAL",t.meta.pagination.total,{root:!0}),n("Pagination/SET_TOTAL_PAGES",t.meta.pagination.total_pages,{root:!0});var e=new O(t.data);n("GET_TABLE_DATA",e.transform()),n("Loading/LOADING",!1,{root:!0})}));case 4:case"end":return e.stop()}}),e)})))()},setOrderPaid:function(t,e){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,r("Loading/LOADING",!0,{root:!0}),n.next=4,Object(o["q"])(e).then((function(){Object(c["b"])("訊息","此訂單設定付款成功","success"),r("Loading/LOADING",!1,{root:!0})}));case 4:case"end":return n.stop()}}),n)})))()},setOrderUnpaid:function(t,e){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,r("Loading/LOADING",!0,{root:!0}),n.next=4,Object(o["r"])(e).then((function(){Object(c["b"])("訊息","此訂單設定未付款成功","success"),r("Loading/LOADING",!1,{root:!0})}));case 4:case"end":return n.stop()}}),n)})))()}},mutations:{GET_TABLE_DATA:function(t,e){t.tableData=Object.freeze(e)}}},g={name:"Order",data:function(){return{title:"訂單列表"}},computed:{tableTitlePost:function(){return{title:this.title,btns:!1,"is-search":!1}},tableViewPost:function(){return{title:this.title,data:this.$store.state.Order.tableData,columns:this.$store.state.Order.columns}}},created:function(){this.$registerModule(this.$store,{Order:p})},mounted:function(){this.$store.commit("Pagination/SET_CURRENT",1),this.$store.dispatch("Order/getOrder")},beforeDestroy:function(){this.$unregisterModule(this.$store,["Order"])},methods:{switchHandle:function(t,e){t?this.$store.dispatch("Order/setOrderPaid",e.id):this.$store.dispatch("Order/setOrderUnpaid",e.id)},handleSizeChange:function(t){this.$store.commit("Pagination/SET_PAGED",t),this.$store.dispatch("Order/getOrder")},handleCurrentChange:function(t){this.$store.commit("Pagination/SET_CURRENT",t),this.$store.dispatch("Order/getOrder")}}},T=g,w=n("2877"),j=Object(w["a"])(T,r,a,!1,null,null,null);e["default"]=j.exports},a15b:function(t,e,n){"use strict";var r=n("23e7"),a=n("44ad"),i=n("fc6a"),o=n("a640"),c=[].join,s=a!=Object,u=o("join",",");r({target:"Array",proto:!0,forced:s||!u},{join:function(t){return c.call(i(this),void 0===t?",":t)}})}}]);